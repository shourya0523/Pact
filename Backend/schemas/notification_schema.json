{
  "notifications": {
    "validator": {
      "$jsonSchema": {
        "bsonType": "object",
        "required": ["user_id", "type"],
        "properties": {
          "_id": {
            "bsonType": "objectId"
          },
          "user_id": {
            "bsonType": "objectId"
          },
          "partnership_id": {
            "bsonType": "objectId"
          },
          "type": {
            "enum": ["partner_nudge", "partnership_request", "partner_checkin", "habit_reminder", "progress_milestone", "missed_habit"]
          },
          "notification_type": {
            "bsonType": "string"
          },
          "title": {
            "bsonType": "string"
          },
          "message": {
            "bsonType": "string"
          },
          "description": {
            "bsonType": "string"
          },
          "related_id": {
            "bsonType": "string"
          },
          "related_user_id": {
            "bsonType": "string"
          },
          "action_taken": {
            "bsonType": "bool",
            "default": false
          },
          "archived": {
            "bsonType": "bool",
            "default": false
          },
          "read_at": {
            "bsonType": "date"
          },
          "is_read": {
            "bsonType": "bool",
            "default": false
          },
          "created_at": {
            "bsonType": "date"
          }
        }
      }
    },
    "indexes": [
      {"key": {"user_id": 1, "is_read": 1}},
      {"key": {"created_at": -1}}
    ]
  }
}