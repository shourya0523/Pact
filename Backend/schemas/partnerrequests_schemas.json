{ 
  "partner_requests": {
    "validator": {
      "$jsonSchema": {
        "bsonType": "object",
        "required": ["sender_id", "receiver_id"],
        "properties": {
          "_id": {
            "bsonType": "objectId"
          },
          "sender_id": {
            "bsonType": "objectId",
            "description": "User who sent request"
          },
          "receiver_id": {
            "bsonType": "objectId",
            "description": "User receiving request"
          },
          "status": {
            "enum": ["pending", "accepted", "rejected", "expired"],
            "description": "Request status"
          },
          "message": {
            "bsonType": "string",
            "description": "Optional message"
          },
          "sent_at": {
            "bsonType": "date"
          },
          "responded_at": {
            "bsonType": "date"
          }
        }
      }
    },
    "indexes": [
      {"key": {"sender_id": 1, "receiver_id": 1}},
      {"key": {"status": 1}},
      {"key": {"sent_at": -1}}
    ]
  }
}