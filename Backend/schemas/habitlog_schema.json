{
 "habit_logs": {
    "validator": {
      "$jsonSchema": {
        "bsonType": "object",
        "required": ["habit_id", "user_id", "log_date", "completed"],
        "properties": {
          "_id": {
            "bsonType": "objectId"
          },
          "habit_id": {
            "bsonType": "objectId"
          },
          "user_id": {
            "bsonType": "objectId"
          },
          "log_date": {
            "bsonType": "date"
          },
          "completed": {
            "bsonType": "bool"
          },
          "timestamp": {
            "bsonType": "date"
          }
        }
      }
    },
    "indexes": [
      {"key": {"habit_id": 1, "user_id": 1, "log_date": 1}, "unique": true},
      {"key": {"log_date": 1}}
    ]
  }
}